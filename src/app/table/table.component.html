<div class="table-content" [ngClass]="{ 'selection': selectedData == null}">
<p-table #dt [value]="data" [columns]="cols" selectionMode="single" [paginator]="true" [first]="first" [rows]="rows"> 
  <ng-template pTemplate="caption">
    <div class="table-header">
        <p-button type="button" icon="pi pi-chevron-left" (click)="prev()" ng-reflect-disabled="false" styleClass="p-button-text" [disabled] = "disabledPrev == true"></p-button>
        <p-button type="button" icon="pi pi-download" (click)="exportExcel()" styleClass="p-button-text" pTooltip="XLS" tooltipPosition="bottom"></p-button>
        <p-button type="button" icon="pi pi-chevron-right" (click)="next()" styleClass="p-button-text" [disabled] = "disabledNext == true"></p-button>
    </div>
</ng-template>      
  <ng-template pTemplate="header" let-columns>
          <tr>
            <th *ngFor="let col of columns">
                {{col.header}}
            </th>
        </tr>
            <!--<tr class="table-header">
              <th class="table-label">Identifier</th>
              <th class="table-label">Coordinate</th>
              <th class="table-label">Variant</th>
              <th class="table-label">Gene</th>
              <th class="table-label">Sift</th>
              <th class="table-label">Polyphen</th>
              <th class="table-label">Change</th>
              <th class="table-label">GMAF</th>
            </tr>-->
        </ng-template>
        <ng-template pTemplate="body" let-eachData>
          <tr (click)="selectData(eachData)" class="table-row" [ngClass]= "{ 'selected': selectedData == eachData }">
            <td class="table-property">
              <div class="variant-space"><a *ngIf="eachData.identifier != null" target="_blank" class="variant-link" href="https://www.ncbi.nlm.nih.gov/snp/{{eachData.identifier}}">{{eachData.identifier}}</a></div>
            </td>
            <td class="table-property">
              <p>{{eachData.chrom}}:{{eachData.pos}}</p>
            </td>
            <td class="table-property variant-column">
              <p [hidden]="eachData.alt.length > 3 || eachData.ref.length > 3">{{eachData.alt}}/{{eachData.ref}}</p>
              <div *ngIf="(eachData.alt.length > 3 && eachData.alt.length <= 6) || (eachData.ref.length > 3 && eachData.ref.length <= 6)">
                <p class="variant-altValue">{{eachData.alt}}</p>
                <p class="variant-refValue">{{eachData.ref}}</p>
              </div>
              <div *ngIf="eachData.alt.length > 6 && eachData.ref.length <= 6">
                <p class="variant-altValue" >{{eachData.alt.substring(0,6)}}</p>
                <p *ngIf="eachData.showAlt == false" (click)="showAlt(eachData)" class="alt variant-moreIcon">+{{eachData.alt.length-6}}</p>
                <p [hidden]="eachData.showAlt == false" class="variant-moreDataAlt">{{eachData.alt.substring(6, eachData.alt.length)}}</p>
                <p [hidden]="eachData.showAlt == false" (click)="hideAlt(eachData)" class="alt variant-lessIcon">-</p>
                <p class="variant-refValue">{{eachData.ref}}</p>
               </div>
              <div *ngIf="eachData.alt.length <= 6 && eachData.ref.length > 6">
                <p class="variant-altValue">{{eachData.alt}}</p>
                <p class="variant-refValue" >{{eachData.ref.substring(0,6)}}</p>
                <p *ngIf="eachData.showRef == false" (click)="showRef(eachData)" class="ref variant-moreIcon">+{{eachData.ref.length-6}}</p>
                <p [hidden]="eachData.showRef == false" class="variant-moreDataRef">{{eachData.ref.substring(6, eachData.ref.length)}}</p>
                <p [hidden]="eachData.showRef == false" (click)="hideRef(eachData)" class="ref variant-lessIcon">-</p>
              </div>
              <div *ngIf="eachData.alt.length > 6 && eachData.ref.length > 6">
                <p class="variant-altValue" >{{eachData.alt.substring(0,6)}}</p>
                <p *ngIf="eachData.showAlt == false" (click)="showAlt(eachData)" class="alt variant-moreIcon">+{{eachData.alt.length-6}}</p>
                <p [hidden]="eachData.showAlt == false" class="variant-moreDataAlt">{{eachData.alt.substring(6, eachData.alt.length)}}</p>
                <p [hidden]="eachData.showAlt == false" (click)="hideAlt(eachData)" class="alt variant-lessIcon">-</p>
                <p class="variant-refValue" >{{eachData.ref.substring(0,6)}}</p>
                <p *ngIf="eachData.showRef == false" (click)="showRef(eachData)" class="ref variant-moreIcon">+{{eachData.ref.length-6}}</p>
                <p [hidden]="eachData.showRef == false" class="variant-moreDataRef">{{eachData.ref.substring(6, eachData.ref.length)}}</p>
                <p [hidden]="eachData.showRef == false" (click)="hideRef(eachData)" class="ref variant-lessIcon">-</p>
              </div>
            </td>
            <td class="table-property">
              <p *ngIf="eachData.gene != null">{{eachData.gene.name}}</p>
              <p *ngIf="eachData.gene == null">-</p>
            </td>
            <td class="table-property">
              <p [hidden]="eachData.sift == null" class="label text" [ngClass]= "{ 'red': eachData.sift == 'deleterious', 
                'green': eachData.sift == 'tolerated'}">{{eachData.sift}}</p>
              <p *ngIf="eachData.sift == null">-</p>
            </td>
            <td class="table-property">
              <p [hidden]="eachData.polyphen == null || eachData.polyphen == 'unknown'" class="label text" 
                [ngClass]= "{ 'red': eachData.polyphen == 'probably damaging','orange': eachData.polyphen == 'possibly damaging', 
                'green': eachData.polyphen == 'benign' }">{{eachData.polyphen}}</p>
              <p *ngIf="eachData.polyphen == null || eachData.polyphen == 'unknown'">-</p>
            </td>
            <td class="table-property">
              <p [hidden]="eachData.amino == null">{{eachData.amino}}</p>
              <p *ngIf="eachData.amino == null">-</p>
            </td>
            <td class="table-property">
              <p class="label" [hidden]="eachData.gmaf == null" [ngClass]= "{ 'red': eachData.gmaf <= 0.01, 
                'orange': eachData.gmaf > 0.01 && eachData.gmaf <= 0.1, 'green': eachData.gmaf > 0.1 }">
                {{eachData.gmaf}}
              </p>
              <p *ngIf="eachData.gmaf == null">-</p>
            </td>
          </tr>
        </ng-template>   
      </p-table>
      <div class="bottom-pannel">  
      <div *ngIf="data.length == 0 || data == undefined" class="preloader"></div>
        <!--<i *ngIf="data.length == 0 || data == undefined" class="pi pi-spin pi-spinner spinner-style"></i>-->
        <div class="pagination-bottom">
            <p-button type="button" icon="pi pi-chevron-left" (click)="prev()" ng-reflect-disabled="false" styleClass="p-button-text"></p-button>
            <p-button type="button" icon="pi pi-chevron-right" (click)="next()" styleClass="p-button-text"></p-button>
        </div>
      </div>
</div>
<app-details *ngIf = "selectedData != null" [selected]="selectedData" (closeDetails)="receivingCloseDetails($event)"></app-details>


