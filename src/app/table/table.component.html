<div class="table-content" [ngClass]="{ 'selection': selectedVariants == null}">
<p-table #dt [value]="variants" [columns]="cols" selectionMode="single" [paginator]="true" [first]="first" [rows]="rows"> 
  <ng-template pTemplate="caption">
    <div class="table-header">
      <div class="buttons-pannel" [ngClass]="{ 'short': selectedVariants != null}">
        <p-button type="button" icon="pi pi-chevron-left" (click)="prev()" ng-reflect-disabled="false" styleClass="p-button-text" [disabled] = "isRealFirstPage() || this.variants.length == 0 || this.variants == undefined"></p-button>
        <p-button type="button" icon="pi pi-download" (click)="downloadExcel()" styleClass="p-button-text" pTooltip="XLS" tooltipPosition="bottom"></p-button>
        <p-button type="button" icon="pi pi-chevron-right" (click)="next()" styleClass="p-button-text" [disabled] = "isRealLastPage() || this.variants.length == 0 || this.variants == undefined"></p-button> 
      </div>
      <div class="page-pannel">
        <p *ngIf="totalPages == 0 || realEmpty"> Page 0 of {{totalPages}}</p>
        <p *ngIf="totalPages !=0"> Page {{page}} of {{totalPages}}</p>
       </div>
      </div>
</ng-template>      
  <ng-template pTemplate="header" let-columns>
          <tr>
            <th *ngFor="let col of columns">
                {{col.header}}
            </th>
        </tr>
        </ng-template>
        <ng-template pTemplate="body" let-eachVariant>
          <tr (click)="selectVariants(eachVariant)" class="table-row" [ngClass]= "{ 'selected': selectedVariants == eachVariant }">
            <td class="table-property">
              <div class="identifier-space" [ngClass]="{ 'spacing': selectedVariants != null}" >
                <a *ngIf="eachVariant.identifier != null && eachVariant.identifier.substring(0,2) == 'rs'" target="_blank" 
                class="variant-link" href="https://www.ncbi.nlm.nih.gov/snp/{{eachVariant.identifier}}">{{eachVariant.identifier}}</a>
                <p *ngIf="eachVariant.identifier != null && eachVariant.identifier.substring(0,2) != 'rs'">{{eachVariant.identifier}}</p>
                <p *ngIf="eachVariant.identifier == null">-</p>
              </div>
            </td>
            <td class="table-property">
              <p>{{eachVariant.chrom}}:{{eachVariant.pos}}</p>
            </td>
            <td class="table-property variant-column">
              <p [hidden]="eachVariant.alt.length > 3 || eachVariant.ref.length > 3">{{eachVariant.alt}}/{{eachVariant.ref}}</p>
              <div *ngIf="(eachVariant.alt.length > 3 && eachVariant.alt.length <= 6) || (eachVariant.ref.length > 3 && eachVariant.ref.length <= 6)">
                <p class="variant-altValue">{{eachVariant.alt}}</p>
                <p class="variant-refValue">{{eachVariant.ref}}</p>
              </div>
              <div *ngIf="eachVariant.alt.length > 6 && eachVariant.ref.length <= 6">
                <p class="variant-altValue" >{{eachVariant.alt.substring(0,6)}}</p>
                <p *ngIf="!eachVariant.showAlt" (click)="showAlt(eachVariant)" class="alt variant-moreIcon">+{{eachVariant.alt.length-6}}</p>
                <p [hidden]="!eachVariant.showAlt" class="variant-moreDataAlt">{{eachVariant.alt.substring(6, eachVariant.alt.length)}}</p>
                <p [hidden]="!eachVariant.showAlt" (click)="hideAlt(eachVariant)" class="alt variant-lessIcon">-</p>
                <p class="variant-refValue">{{eachVariant.ref}}</p>
               </div>
              <div *ngIf="eachVariant.alt.length <= 6 && eachVariant.ref.length > 6">
                <p class="variant-altValue">{{eachVariant.alt}}</p>
                <p class="variant-refValue" >{{eachVariant.ref.substring(0,6)}}</p>
                <p *ngIf="!eachVariant.showRef" (click)="showRef(eachVariant)" class="ref variant-moreIcon">+{{eachVariant.ref.length-6}}</p>
                <p [hidden]="!eachVariant.showRef" class="variant-moreDataRef">{{eachVariant.ref.substring(6, eachVariant.ref.length)}}</p>
                <p [hidden]="!eachVariant.showRef" (click)="hideRef(eachVariant)" class="ref variant-lessIcon">-</p>
              </div>
              <div *ngIf="eachVariant.alt.length > 6 && eachVariant.ref.length > 6">
                <p class="variant-altValue" >{{eachVariant.alt.substring(0,6)}}</p>
                <p *ngIf="!eachVariant.showAlt" (click)="showAlt(eachVariant)" class="alt variant-moreIcon">+{{eachVariant.alt.length-6}}</p>
                <p [hidden]="!eachVariant.showAlt" class="variant-moreDataAlt">{{eachVariant.alt.substring(6, eachVariant.alt.length)}}</p>
                <p [hidden]="!eachVariant.showAlt" (click)="hideAlt(eachVariant)" class="alt variant-lessIcon">-</p>
                <p class="variant-refValue" >{{eachVariant.ref.substring(0,6)}}</p>
                <p *ngIf="!eachVariant.showRef" (click)="showRef(eachVariant)" class="ref variant-moreIcon">+{{eachVariant.ref.length-6}}</p>
                <p [hidden]="!eachVariant.showRef" class="variant-moreDataRef">{{eachVariant.ref.substring(6, eachVariant.ref.length)}}</p>
                <p [hidden]="!eachVariant.showRef" (click)="hideRef(eachVariant)" class="ref variant-lessIcon">-</p>
              </div>
            </td>
            <td class="table-property">
              <p *ngIf="eachVariant.gene != null">{{eachVariant.gene.name}}</p>
              <p *ngIf="eachVariant.gene == null">-</p>
            </td>
            <td class="table-property">
              <p [hidden]="eachVariant.sift == null" class="label text" [ngClass]= "{ 'red': eachVariant.sift == 'deleterious', 
                'green': eachVariant.sift == 'tolerated'}">{{eachVariant.sift}}</p>
              <p *ngIf="eachVariant.sift == null">-</p>
            </td>
            <td class="table-property">
              <p [hidden]="eachVariant.polyphen == null || eachVariant.polyphen == 'unknown'" class="label text" 
                [ngClass]= "{ 'red': eachVariant.polyphen == 'probably damaging','orange': eachVariant.polyphen == 'possibly damaging', 
                'green': eachVariant.polyphen == 'benign' }">{{eachVariant.polyphen}}</p>
              <p *ngIf="eachVariant.polyphen == null || eachVariant.polyphen == 'unknown'">-</p>
            </td>
            <td class="table-property">
              <p [hidden]="eachVariant.amino == null">{{eachVariant.amino}}</p>
              <p *ngIf="eachVariant.amino == null">-</p>
            </td>
            <td class="table-property">
              <p class="label" [hidden]="eachVariant.gmaf == null" [ngClass]= "{ 'red': eachVariant.gmaf <= 0.01, 
                'orange': eachVariant.gmaf > 0.01 && eachVariant.gmaf <= 0.1, 'green': eachVariant.gmaf > 0.1 }">
                {{eachVariant.gmaf}}
              </p>
              <p *ngIf="eachVariant.gmaf == null">-</p>
            </td>
          </tr>
        </ng-template>   
      </p-table>
      <div class="bottom-pannel">  
        <div class="pagination-bottom">
          <div class="paginator-left" [ngClass]= "{ 'paginating': variants.length != 0 && variants != undefined && !realEmpty }">
            <p-button type="button" icon="pi pi-chevron-left" (click)="prev()" ng-reflect-disabled="false" styleClass="p-button-text" [disabled] = "isRealFirstPage() || this.variants.length == 0 || this.variants == undefined"></p-button>
          </div> 
        <div *ngIf="(variants.length == 0 || variants == undefined) && !realEmpty" class="preloader"></div>
        <div *ngIf="realEmpty" class="no-variants">
          <p>No variants available</p>
        </div>
          <div class="paginator-right">
            <p-button type="button" icon="pi pi-chevron-right" (click)="next()" styleClass="p-button-text" [disabled] = "isRealLastPage() || this.variants.length == 0 || this.variants == undefined"></p-button>
          </div>
        </div>
      </div>
</div>
<app-details *ngIf = "selectedvariants != null" [selected]="selectedvariants" (closeDetails)="receivingCloseDetails($event)"></app-details>


